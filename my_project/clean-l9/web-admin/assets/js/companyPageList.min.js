"use strict";$(function(){a("/admin/getCompanyPageList",1);delAllSelect("companyIdList","/admin/deleteCompanyList");function a(c,b){if(!c){return false;
}var d=b||1;$.ajax({type:"POST",url:c,data:{pageIndex:d,pageSize:CONFIG.pageSize},success:function(e){var e=JSON.parse(e),g=e.data;if(e.code=="N00000"&&g!=undefined){$("#listCount").text(g.totalCount);
laypage({cont:$("#page"),skip:true,groups:6,pages:g.totalPages,curr:d||1,jump:function(h,i){if(!i){a(c,h.curr);}}});if(g.data!=undefined){var f=g.data;
$("#dataList").dataTable({autoWidth:true,info:false,paging:false,ordering:false,searching:false,deferRender:true,destroy:true,data:f,columns:[{data:"companyId",render:function(i,h,k,j){return'<input type="checkbox" value="'+k.companyId+'" name="selDel">';
}},{data:"companyId"},{data:"companyName"},{data:"createTime",render:function(i,h,k,j){return(k.createTime).toString().replace(/T/g," ").replace(/\+[\d]{4}/,"");
}},{render:function(i,h,k,j){return'<a title="编辑" href="javascript:;" onclick="companyModeShow (\'公司编辑\',\'/admin/editCompanySubmit?companyId='+k.companyId+"','"+k.companyName+'\')" class="ml-5" style="text-decoration:none"><i class="Hui-iconfont">&#xe6df;</i></a> <a title="删除" href="javascript:;" onclick="delSelect(this,\'/admin/deleteCompanyList?companyIdList='+k.companyId+'\')" class="ml-5" style="text-decoration:none"><i class="Hui-iconfont">&#xe6e2;</i></a>';
}}],createdRow:function(j,i,h){$(j).addClass("text-c");}});}}else{layer.msg(e.message,{icon:1,time:1000});}},error:function(e,g,f){layer.msg("网络错误!",{icon:1,time:1000});
console.error(e,g,f);}});}});var dis=false;function companyModeShow(d,a,c){var b=$("#companyName");b.val(c);layer.open({type:1,area:["800px","310px"],fix:false,maxmin:true,shade:0.4,title:d,content:$("#addCompany"),success:function(e,f){$("#reset").on("click",function(){layer.close(f);
return false;});$("#form").validate({rules:{companyName:{required:true}},onkeyup:false,focusCleanup:true,success:"valid",submitHandler:function(g){var h=b.val();
if(dis){return false;}dis=true;$.ajax({type:"post",data:{companyName:h,},url:a,success:function(i){var i=JSON.parse(i);if(i.code=="N00000"){layer.msg("保存成功!",{icon:1,time:1000});
setTimeout(function(){location.replace(location.href);},1200);}else{layer.msg(i.message,{icon:2,time:1000});}dis=false;},error:function(i,k,j){layer.msg("网络错误!",{icon:2,time:1000});
dis=false;}});}});}});return false;}