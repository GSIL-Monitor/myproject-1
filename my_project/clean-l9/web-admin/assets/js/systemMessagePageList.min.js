"use strict";$(function(){$("#seach").on("click",function(){a("/admin/getSystemMessagePageList",1);return false;}).trigger("click");delAllSelect("systemMessageIdList","/admin/deleteSystemMessageList");
function a(f,e){if(!f){return false;}var h=e||1;var b=$("#startDate").val(),g=$("#endDate").val(),i=$("#keyWord").val(),d=$("#type").val(),c=$("#companyId").val();
$.ajax({type:"POST",url:f,data:{startDate:b,endDate:g,userName:i,companyId:c,type:d,pageIndex:h,pageSize:CONFIG.pageSize},success:function(j){var j=JSON.parse(j),l=j.data;
if(j.code=="N00000"&&l!=undefined){$("#listCount").text(l.totalCount);laypage({cont:$("#page"),skip:true,groups:6,pages:l.totalPages,curr:h||1,jump:function(m,n){if(!n){a(f,m.curr);
}}});if(l.data!=undefined){var k=l.data;$("#dataList").dataTable({autoWidth:true,info:false,paging:false,ordering:false,searching:false,deferRender:true,destroy:true,data:k,columns:[{data:"systemMessageId",render:function(n,m,p,o){return'<input type="checkbox" value="'+p.systemMessageId+'" name="selDel">';
}},{data:"companyName"},{data:"messageType",render:function(p,o,r,q){var n="",m=r.messageType;if(m!=undefined){n=m==1?"纯文字":"图文链接";}return n;}},{data:"title"},{data:"messageContent",render:function(q,o,s,r){var n="",m=s.messageType,p=s.messageContent;
if(p!=undefined){n=m==1?p:'<a title="查看" href="javascript:;" onclick="pageShow (\'消息编辑\',\''+p+"','','510')\" class=\"ml-5\" style=\"text-decoration:none\">"+p+"</a>";
}return n;}},{data:"userName",render:function(n,m,p,o){return(p.userName===undefined)?"":p.userName;}},{data:"createTime",render:function(n,m,p,o){return(p.createTime===undefined)?"":(p.createTime).toString().replace(/T/g," ").replace(/\+[\d]{4}/,"");
}},{render:function(n,m,p,o){return'<a title="编辑" href="javascript:;" onclick="pageFullShow (\'消息编辑\',\'/admin/editSystemMessage?systemMessageId='+p.systemMessageId+'\')" class="ml-5" style="text-decoration:none"><i class="Hui-iconfont">&#xe6df;</i></a> <a title="删除" href="javascript:;" onclick="delSelect(this,\'/admin/deleteSystemMessageList?systemMessageIdList='+p.systemMessageId+'\')" class="ml-5" style="text-decoration:none"><i class="Hui-iconfont">&#xe6e2;</i></a>';
}}],createdRow:function(o,n,m){$(o).addClass("text-c");}});}}else{layer.msg(j.message,{icon:1,time:1000});}},error:function(j,l,k){layer.msg("网络错误!",{icon:1,time:1000});
console.error(j,l,k);}});}});